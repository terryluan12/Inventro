{% extends "dashboard/base.html" %}
{% load static %}


{% block main %}

  <main class="main">
    <header class="topbar">
      <div class="d-flex align-items-center justify-content-between">
        <h1 class="h4 mb-0">Dashboard</h1>
        <div class="d-flex gap-2">
          <a class="btn btn-outline-secondary btn-sm" href="/inventory">
            <i class="bi bi-archive me-1"></i>Inventory
          </a>
        </div>
      </div>
    </header>

    <section class="container py-4">
      <!-- Stat cards -->
      <div class="row g-3 mb-3">
        <div class="col-12 col-sm-6 col-lg-4 col-xl-2">
          <div class="card shadow-sm">
            <div class="card-body stat">
              <div class="stat-title">Total Items</div>
              <div class="stat-value">{{ metrics.total_items }}</div>
              <div class="stat-delta text-success"><i class="bi bi-arrow-up-right"></i></div>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-4 col-xl-2">
          <div class="card shadow-sm">
            <div class="card-body stat">
              <div class="stat-title">Low Stock</div>
              <div class="stat-value">{{ metrics.low_stock }}</div>
              <div class="stat-delta text-warning"><i class="bi bi-exclamation-circle"></i> Monitor</div>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-4 col-xl-2">
          <div class="card shadow-sm">
            <div class="card-body stat">
              <div class="stat-title">Out of Stock</div>
              <div class="stat-value">{{ metrics.out_of_stock }}</div>
              <div class="stat-delta text-danger"><i class="bi bi-dash-circle"></i> Reorder</div>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-4 col-xl-2">
          <div class="card shadow-sm">
            <div class="card-body stat">
              <div class="stat-title">Inventory Value</div>
              <div class="stat-value">${{ metrics.inventory_value }}</div>
              <div class="stat-delta text-success"><i class="bi bi-arrow-up-right"></i></div>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-4 col-xl-2">
          <div class="card shadow-sm">
            <div class="card-body stat">
              <div class="stat-title">New Items (7d)</div>
              <div class="stat-value">{{ metrics.new_items_7d }}</div>
              <div class="stat-delta text-success"><i class="bi bi-check-circle"></i> OK</div>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-4 col-xl-2">
          <div class="card shadow-sm">
            <div class="card-body stat">
              <div class="stat-title">Categories</div>
              <div class="stat-value">{{ metrics.categories }}</div>
              <div class="stat-delta text-muted"><i class="bi bi-three-dots"></i></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Charts (left as-is; your JS can call /api/metrics/ if needed) -->
      <div class="row g-3">
        <div class="col-12 col-xl-7">
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <h2 class="h6 mb-0">Inventory Trend</h2>
              </div>
              <canvas id="inventoryTrendChart" height="120"></canvas>
            </div>
          </div>
        </div>
        <div class="col-12 col-xl-5">
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <h2 class="h6 mb-0">Items by Category</h2>
              </div>
              <canvas id="itemsByCategoryChart" height="120"></canvas>
            </div>
          </div>
        </div>
      </div>
    </section>

{% endblock %}

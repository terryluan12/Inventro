{% extends "dashboard/base.html" %}

{# Cart page for the Inventro platform #}
{% block headers %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
{% endblock %}
{% block main %}
    <header class="topbar">
      <div class="d-flex align-items-center justify-content-between">
        <h1 class="h5 mb-0">Your Cart</h1>
      </div>
    </header>

    <section class="content container-fluid px-3 px-lg-4 py-3">

      {% if cart_items %}
      <div class="rounded-4 overflow-hidden">
        <table class="table table-striped mb-0">
          <thead>
            <tr>
              <th scope="col">Item</th>
              <th scope="col">Quantity</th>
              <th scope="col">In Stock</th>
            </tr>
          </thead>
          <tbody>
            {% for cart_item in cart_items %}
            {% include 'cart/partials/edit_cart_modal.html' with cart_item=cart_item item=cart_item.item  %}
            <tr>
              <td>{{ cart_item.item.name }}</td>
              <td>{{ cart_item.quantity }}</td>
              <td><button
                    type="button"
                    class="btn btn-sm btn-outline-secondary"
                    data-bs-toggle="modal"
                    data-bs-target="#modal{{ cart_item.item.id }}"
                    ><i class="bi bi-pencil"></i
                  ></button></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <form
        method="POST"
        action="{% url 'inventory_add_cart' %}"
        class="mt-4"
      >
        {% csrf_token %}
          <div>
            <a href="{% url 'dashboard_inventory' %}" class="btn btn-primary">Continue Shopping</a>
            <button
                type="submit"
                class="btn btn-success"
                >Proceed to Checkout</a>
          </div>
      </form>
      {% else %}
        <p>Your cart is empty.</p>
      {% endif %}
    </section>
{% endblock %}

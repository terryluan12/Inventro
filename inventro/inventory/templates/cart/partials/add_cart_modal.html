{% extends 'modal.html' %}

{% block modal_id %}modal{{ item.id }}{% endblock %}

{% block modal_title %}Add {{ item.name }} to Cart{% endblock %}

{% block modal_body %}
  <form id="add-to-cart-form-{{ item.id }}" method="post" action="{% url 'cart_api' %}">
    {% csrf_token %}
    <p>How many units of <strong>{{ item.name }}</strong> would you like to add to your cart?</p>
    <div class="mb-3">
      <label for="quantity" class="form-label">Quantity</label>
      <input type="number" class="form-control" id="quantity" name="quantity" min="1" max="{{ item.in_stock }}" value="1" required>
      <div class="form-text">Available stock: {{ item.in_stock }}</div>
      <input type="hidden" name="item_id" value="{{ item.id }}">
    </div>
  </form>
{% endblock %}

{% block modal_footer %}
  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
  <button type="submit" class="btn btn-primary" form="add-to-cart-form-{{ item.id }}">Add to Cart</button>
{% endblock %}